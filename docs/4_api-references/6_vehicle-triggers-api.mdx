---
sidebar_position: 7
---

import TwoColumnLayout from '@site/src/components/TwoColumnLayout';
import ApiCodeBlock from '@site/src/components/ApiCodeBlock';
import ApiResponseBlock from '@site/src/components/ApiResponseBlock';
import ParametersBlock from '@site/src/components/ParametersBlock';
import ApiEndpointsBlock from '@site/src/components/ApiEndpointsBlock';

# Vehicle Triggers API

{/* TODO: Add links */}
:::info Developer Notes
Webhooks that you configure are tied to a specific Developer License.

If you have multiple Developer Licenses under a single account in the DIMO Developer Console, please make sure to authenticate using the Developer JWT associated with the specific license.
:::

<TwoColumnLayout
  leftColumn={
    <div>
      <h2>Overview</h2>

    Webhooks can also be setup directly via the DIMO Developer Console, but the options below provide a programmatic way of configuring vehicle triggers and subscribing vehicles to triggers you have configured.
{/* TODO: Add links */}
     Webhooks are currently available in public beta. If you have feedback to share, please reach out to developer-support@dimo.org.
    </div>
  }
  rightColumn={
    <div>
     <h2>Base URL</h2>

      <code>https://vehicle-triggers-api.dimo.zone</code>

      <ApiEndpointsBlock
        endpoints={[
          {
            method: 'GET',
            path: '/v1/webhooks',
            description: 'List all webhooks for your account',
            id: 'get-webhooks'
          },
          {
            method: 'POST',
            path: '/v1/webhooks',
            description: 'Create a new webhook',
            id: 'create-webhook'
          },
          {
            method: 'GET',
            path: '/v1/webhooks/signals',
            description: 'Get available webhook signals',
            id: 'get-webhook-signals'
          },
          {
            method: 'PUT',
            path: '/v1/webhooks/:webhookId',
            description: 'Update a specific webhook',
            id: 'update-webhook'
          },
          {
            method: 'DELETE',
            path: '/v1/webhooks/:webhookId',
            description: 'Delete a specific webhook',
            id: 'delete-webhook'
          },
          {
            method: 'GET',
            path: '/v1/webhooks/:webhookId',
            description: 'Get a specific webhook',
            id: 'get-webhook'
          },
          {
            method: 'GET',
            path: '/v1/webhooks/vehicles/:tokenDID',
            description: 'Get webhooks for a specific vehicle',
            id: 'get-vehicle-webhooks'
          },
          {
            method: 'POST',
            path: '/v1/webhooks/:webhookId/subscribe/:tokenDID',
            description: 'Subscribe a vehicle to a webhook',
            id: 'subscribe-vehicle'
          },
          {
            method: 'POST',
            path: '/v1/webhooks/:webhookId/subscribe/all',
            description: 'Subscribe all vehicles to a webhook',
            id: 'subscribe-all-vehicles'
          },
          {
            method: 'DELETE',
            path: '/v1/webhooks/:webhookId/unsubscribe/:tokenDID',
            description: 'Unsubscribe a vehicle from a webhook',
            id: 'unsubscribe-vehicle'
          },
          {
            method: 'DELETE',
            path: '/v1/webhooks/:webhookId/unsubscribe/all',
            description: 'Unsubscribe all vehicles from a webhook',
            id: 'unsubscribe-all-vehicles'
          }
        ]}
      />

      {/* TODO: ADD A HEADERS SECTION FOR DEV JWT */}


    </div>
  }
/>

<TwoColumnLayout
  id="create-webhook"
  leftColumn={
    <div>
      <h2>Create a webhook</h2>
      Creates a new webhook trigger for vehicle events. You can configure what events trigger the webhook and which vehicles should be monitored.

      <ParametersBlock
        parameters={[
          {
            name: "url",
            type: "string",
            required: true,
            description: "The URL endpoint where webhook notifications will be sent. Must be a valid HTTPS URL."
          },
          {
            name: "events",
            type: "[string]",
            required: true,
            description: "Array of event types that should trigger this webhook. Available events include vehicle status changes, trip events, and telemetry thresholds."
          },
          {
            name: "description",
            type: "string",
            required: false,
            description: "Optional description for the webhook to help identify its purpose."
          },
        ]}
      />
    </div>
  }
  rightColumn={
    <div>
      <ApiCodeBlock
        requestType="POST"
        path="/v1/webhooks"
        codeExamples={[{
            label: "cURL",
            language: "bash",
            code: `curl -X POST "https://vehicle-triggers-api.dimo.zone/v1/webhooks" \\
  -H "Authorization: Bearer YOUR_DEV_JWT" \\
  -H "Content-Type: application/json" \\
  -d '{
    "url": "https://your-app.com/webhook",
    "events": ["trip.start", "trip.end"],
    "description": "Trip tracking webhook"
  }'`
          },
          {
            label: "JavaScript",
            language: "javascript",
            code: `const response = await fetch('https://vehicle-triggers-api.dimo.zone/v1/webhooks', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_DEV_JWT',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    url: 'https://your-app.com/webhook',
    events: ['trip.start', 'trip.end'],
    description: 'Trip tracking webhook'
  })
});`
          }
        ]}
        defaultLanguage="bash"
      />

      <ApiResponseBlock
        code={`{
  "webhookId": "webhook_1234567890",
  "url": "https://your-app.com/webhook",
  "events": ["trip.start", "trip.end"],
  "description": "Trip tracking webhook",
  "active": true,
  "createdAt": "2024-01-15T10:30:00Z"
}`}
      />
    </div>
  }
/>
