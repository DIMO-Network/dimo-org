---
sidebar_position: 7
---

import TwoColumnLayout from '@site/src/components/TwoColumnLayout';
import ApiCodeBlock from '@site/src/components/ApiCodeBlock';
import ApiResponseBlock from '@site/src/components/ApiResponseBlock';
import ParametersBlock from '@site/src/components/ParametersBlock';
import ApiEndpointsBlock from '@site/src/components/ApiEndpointsBlock';

# Vehicle Triggers API

{/* TODO: Add links */}
:::info Developer Notes
Webhooks that you configure are tied to a specific Developer License.

If you have multiple Developer Licenses under a single account in the DIMO Developer Console, please make sure to authenticate using the Developer JWT associated with the specific license.
:::

<TwoColumnLayout
  leftColumn={
    <div>
      <h2>Overview</h2>

    Webhooks can also be setup directly via the DIMO Developer Console, but the options below provide a programmatic way of configuring vehicle triggers and subscribing vehicles to triggers you have configured.
{/* TODO: Add links */}
     Webhooks are currently available in public beta. If you have feedback to share, please reach out to developer-support@dimo.org.
    </div>
  }
  rightColumn={
    <div>
     <h2>Base URL</h2>

      <code>https://vehicle-triggers-api.dimo.zone</code>

      <ApiEndpointsBlock
        endpoints={[
          {
            method: 'GET',
            path: '/v1/webhooks',
            id: 'get-webhooks'
          },
          {
            method: 'POST',
            path: '/v1/webhooks',
            id: 'create-webhook'
          },
          {
            method: 'GET',
            path: '/v1/webhooks/signals',
            id: 'get-webhook-signals'
          },
          {
            method: 'PUT',
            path: '/v1/webhooks/:webhookId',
            id: 'update-webhook'
          },
          {
            method: 'DELETE',
            path: '/v1/webhooks/:webhookId',
            id: 'delete-webhook'
          },
          {
            method: 'GET',
            path: '/v1/webhooks/:webhookId',
            id: 'get-webhook'
          },
          {
            method: 'GET',
            path: '/v1/webhooks/vehicles/:tokenDID',
            id: 'get-vehicle-webhooks'
          },
          {
            method: 'POST',
            path: '/v1/webhooks/:webhookId/subscribe/:tokenDID',
            id: 'subscribe-vehicle'
          },
          {
            method: 'POST',
            path: '/v1/webhooks/:webhookId/subscribe/all',
            id: 'subscribe-all-vehicles'
          },
          {
            method: 'DELETE',
            path: '/v1/webhooks/:webhookId/unsubscribe/:tokenDID',
            id: 'unsubscribe-vehicle'
          },
          {
            method: 'DELETE',
            path: '/v1/webhooks/:webhookId/unsubscribe/all',
            id: 'unsubscribe-all-vehicles'
          }
        ]}
      />

      {/* TODO: ADD A HEADERS SECTION FOR DEV JWT */}


    </div>
  }
/>

<TwoColumnLayout
  id="get-webhooks"
  leftColumn={
    <div>
      <h2>List all webhooks</h2>
      Retrieves a list of all the webhooks that have been created under your Developer License.
    </div>
  }
  rightColumn={
    <div>
      <ApiCodeBlock
        requestType="GET"
        path="/v1/webhooks"
        codeExamples={[{
            label: "TypeScript",
            language: "typescript",
            code: `const allWebhooks = await dimo.VehicleTriggers.ListWebhooks({
      developerJwt: "eyJhbGc...ILlujqw"
  });
  `
          },
          {
            label: "Python",
            language: "python",
            code: `all_webhooks = dimo.vehicle_triggers.list_all_webhooks(
      developer_jwt = "eyJhbGc...ILlujqw"
  )`
          }
        ]}
        defaultLanguage="typescript"
      />

      <ApiResponseBlock
        code={`[
    [
      {
        "id": "2r8653ab-721c-4356-ac1d-f2a620b345bc",
        "service": "telemetry.signals",
        "metricName": "speed",
        "condition": "valueNumber > 95",
        "targetURL": "https://api.igottafastcar.com/webhook-receiver",
        "coolDownPeriod": 30,
        "status": "enabled",
        "description": "Fires whenever a subscribed vehicle travels over 95kph",
        "createdAt": "2025-08-12T20:06:38.285919Z",
        "updatedAt": "2025-08-12T20:06:38.285919Z",
        "failureCount": 0,
        "displayName": "Speeding check"
      },
      {
        "id": "9d5fd26c-7d21-4425-b43c-dc279bb76036",
        "service": "telemetry.signals",
        "metricName": "powertrainTractionBatteryChargingIsCharging",
        "condition": "valueNumber == 1",
        "targetURL": "https://api.igottafastcar.com/webhook-receiver",
        "coolDownPeriod": 0,
        "status": "enabled",
        "description": "Fires when a subscribed vehicle begins a charging session",
        "createdAt": "2025-08-19T13:42:23.654711Z",
        "updatedAt": "2025-08-19T13:42:23.654711Z",
        "failureCount": 0,
        "displayName": "Vehicle charging check"
      }
    ]
]`}
      />
    </div>
  }
/>

<TwoColumnLayout
  id="create-webhook"
  leftColumn={
    <div>
      <h2>Create a webhook</h2>
      Registers a new webhook with the specified configurations and conditions.

      {/* TODO: Inline linking, code, fomatting, etc */}
      {/* TODO: Read thru and fix up all language, need better examples/samples in new code blocks */}
      <ParametersBlock
        parameters={[
          {
            name: "service",
            type: "string",
            required: true,
            description: "The subsystem producing the metric. For example, telemetry.signals or telemetry.events"
          },
          {
            name: "metricName",
            type: "string",
            required: true,
            description: "The fully qualified signal or event name to monitor. Examples: Signals: speed, powertrainTransmissionTravelledDistance, powertrainTractionBatteryChargingIsCharging, etc. Events: ExtremeBraking, HarshAcceleration, HarshBraking, HarshCornering"
          },
          {
            name: "condition",
            type: "string",
            required: true,
            description: "The CEL expression evaluated against the metric to decide when to fire. You can use the following condition statements: >=, <=, >, <, ==. You should always include value. In the example above, we're checking when the speed (value) is greater than 55 kph. Optionally, you can also include a previousValue to perform a check to see if things have changed, i.e. value > 55 && value != previousValue"
          },
          {
            name: "coolDownPeriod",
            type: "integer",
            required: true,
            description: "The minimum number of seconds between successive firings of your webhook. "
          },
          {
            name: "description",
            type: "string",
            required: true,
            description: "A brief description of the webhook conditions for your own reference."
          },
          {
            name: "displayName",
            type: "string",
            required: false,
            description: "An optional input to easily identify your webhook. If left blank, displayName will default to the webhookId."
          },
          {
            name: "targetURL",
            type: "string",
            required: true,
            description: "The HTTPS endpoint URL that will receive webhook callbacks. "
          },
          {
            name: "status",
            type: "string",
            required: true,
            description: "Should be one of the following: enabled - the webhook is actively in use, disabled - the webhook exists, but is not actively in use."
          },
          {
            name: "verificationToken",
            type: "string",
            required: true,
            description: "A plain/text string that is the expected token that your endpoint must echo back during verification."
          },
        ]}
      />
    </div>
  }
  rightColumn={
    <div>
      <ApiCodeBlock
        requestType="POST"
        path="/v1/webhooks"
        codeExamples={[{
            label: "TypeScript",
            language: "typescript",
            code: `const allWebhooks = await dimo.VehicleTriggers.ListWebhooks({
      developerJwt: "eyJhbGc...ILlujqw"
  });
  `
          },
          {
            label: "Python",
            language: "python",
            code: `all_webhooks = dimo.vehicle_triggers.list_all_webhooks(
      developer_jwt = "eyJhbGc...ILlujqw"
  )`
          }
        ]}
        defaultLanguage="typescript"
      />

      <ApiResponseBlock
        code={`[
    {
      "id": "124e4d57-8952-4ded-96c1-0g99f1fa1234",
      "message": "Webhook registered successfully"
    }
]`}
      />
    </div>
  }
/>
