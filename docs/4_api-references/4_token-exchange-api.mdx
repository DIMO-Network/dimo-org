---
sidebar_position: 5
---

import TwoColumnLayout from '@site/src/components/TwoColumnLayout';
import ApiCodeBlock from '@site/src/components/ApiCodeBlock';
import ApiResponseBlock from '@site/src/components/ApiResponseBlock';
import ParametersBlock from '@site/src/components/ParametersBlock';

# Token Exchange API

{/* TODO: Add links */}
:::info Developer Notes
New to authentication on DIMO? Check out the Authentication Explainer here, or
check out our video on how the different JSON Web Tokens (JWTs) work.
:::

<TwoColumnLayout
  leftColumn={
    <div>
      <h2>Overview</h2>

    This is a private API endpoint for developers on the DIMO Network. It handles the exchange to obtain a Vehicle JWT. When users shared permissions with an app, the app can now request for vehicle data on behalf of the users.
    </div>
  }
  rightColumn={
    <div>
     <h2>Base URL</h2>

      <code>https://token-exchange-api.dimo.zone</code>

      <h3>Endpoints</h3>

      <code>POST /v1/tokens/exchange</code>
      {/* TODO: FIX SPACING HERE - new component */}

      {/* TODO: ADD A HEADERS SECTION FOR DEV JWT */}


    </div>
  }
/>

<TwoColumnLayout
  leftColumn={
    <div>
      <h2>Create a token exchange</h2>
      Creates a token exchange to obtain a Vehicle JWT. The response will provide a short-lived token that last you 10 minutes to access additional vehicle information such as Trips and Telemetry data.

      <ParametersBlock
        parameters={[
          {
            name: "nftContractAddress",
            type: "string",
            required: true,
            description: "The Vehicle NFT address, in the Production environment, this is: 0xbA5738a18d83D41847dfFbDC6101d37C69c9B0cF."
          },
          {
            name: "privileges",
            type: "[integer]",
            required: true,
            description: "An array of integers indicating the level of privileges provided to the token bearer. While this parameter is required when making direct calls to the API, the latest versions of the Data SDKs can handle this for you. See the examples to the right for more information."
          },
          {
            name: "tokenId",
            type: "integer",
            required: true,
            description: "The Vehicle ID that you are requesting permission to. This is an integer that indicates the vehicle you are inquiring about."
          },
        ]}
      />
    </div>
  }
  rightColumn={
    <div>
      <ApiCodeBlock
        requestType="POST"
        path="/v1/tokens/exchange"
        codeExamples={[{
            label: "TypeScript",
            language: "typescript",
            code: `const vehicleJwt = await dimo.tokenExchange.exchange({
    developerJwt: "eyJhbGc...ILlujqw",
    tokenId: 123456
  })`
          },
          {
            label: "Python",
            language: "python",
            code: `vehicle_jwt_request = dimo.token_exchange.exchange(
    developer_jwt="eyJhbGc...ILlujqw",
    token_id=123456
  )`
          },
          {
            label: ".NET",
            language: "csharp",
            code: `var vehicleJwt = await dimoClient.TokenExchangeService.GetPrivilegeTokenAsync(
    accessToken = "eyJhbGc...ILlujqw",
    privileges = [1,3,4,5],
    tokenId = 123456
  );`
          }
        ]}
        defaultLanguage="typescript"
      />

      <ApiResponseBlock
        code={`{
    "token": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjJmMGM3NTc5ZmYyYTAzMGY0NmY1YzVkMzMyY2YyYjMyMzkxMzIxZGIifQ.eyJjb250cmFjdF9hZGRyZXNzIjoiMHhiYTU3MzhhMThkODNkNDE4NDdkZmZiZGM2MTAxZDM3YzY5YzliMGNmIiwiZXhwIjoxNzA2MDM4MTI4LCJpYXQiOjE3MDYwMzc1MjgsImlzcyI6Imh0dHBzOi8vYXV0aC1yb2xlcy1yaWdodHMuZGltby56b25lIiwicHJpdmlsZWdlX2lkcyI6WzRdLCJzdWIiOiIweGJBNTczOGExOGQ4M0Q0MTg0N2RmRmJEQzYxMDFkMzdDNjljOUIwY0YvMjE5NTciLCJ0b2tlbl9pZCI6IjIxOTU3In0.0J3HIsNeG5-JvMBcTwR8KHhTnXb31jvwjxiKVRnNaFidE0vLbyd6PtPsouniZQMIC46wzqwm2c7aZ61WhPIx9p5TB-cKcMmeKFE9mFZfBuSmvNbDd5icAvkxogWlNPki5WM2_otaGf9WtsZPlWW9GgUmBoPaRhiKB3fX7TPROcn0tTjtVir9HJKnf2CMkDwTk9rZxer8eGB6ekBSJr1aDjdqlY6HRxF_azy_rWVdzB1Wd1He9KyB3HHr1qBk5XK8d_zTA-4X3i3IEP5Z8Q3gxgoQRem70SnBNpjJjeRgAgzjfqHnKaFcjhKlxWD0h9mnpGWvd3oZLd9BPqR3WyDUCA"
}`}
      />
    </div>
  }
/>
